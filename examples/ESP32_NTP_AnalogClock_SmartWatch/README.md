# ESP32 NTPアナログ時計 スマートウォッチ風デザイン

> **本プロジェクトは [ESP32_GMT154-06_test](https://github.com/tomorrow56/ESP32_GMT154-06_test) リポジトリの `examples` ディレクトリ配下に追加されています。**

このプロジェクトは、ESP32とLovyanGFXライブラリを使い、NTPサーバーから取得した時刻をスマートウォッチ風のデザインでLCDに表示するサンプルです。以下の特徴があります：

- **スマートウォッチ風デザイン**: モダンでミニマルなデザインを採用
- **高精度表示**: 秒針・分針・時針の滑らかな動きを実現
- **NTP同期**: インターネット経由で正確な時刻を取得
- **非同期Web機能**: WiFi設定とOTA更新に対応
- **タッチセンサー対応**: 設定モード切替が可能

## ハードウェア要件
- ESP32開発ボード
- 240x240 LCDパネル（ST7789ドライバ搭載推奨）
- 配線用ジャンパワイヤ
- IO32ピンに接続するタッチセンサーまたは対象物（オプション）

### LCDピン接続例
| LCDピン | ESP32ピン |
|---------|-----------|
| RESET   | IO4       |
| D/C     | IO2       |
| DATA    | IO23      |
| CLK     | IO18      |
| BL      | IO25      |

## ソフトウェア要件
- PlatformIO
- Arduino Framework for ESP32
- LovyanGFX v1.1.9以上
- AsyncElegantOTA v2.2.7以上
- ESPAsyncWebServer-esphome v3.0.0以上
- Arduino_JSON v0.2.0以上

## プロジェクト構成

```
/src
  |- main.cpp           # メインプログラム
  |- ntp_clock.h        # NTP時計ライブラリヘッダ
  |- ntp_clock.cpp      # NTP時計ライブラリ実装
/platformio.ini          # PlatformIO設定ファイル
/README.md               # プロジェクト説明
```

## セットアップ手順
1. 本リポジトリをクローンまたはダウンロード
2. PlatformIOでプロジェクトを開く
3. 必要に応じて`platformio.ini`のWiFi設定を変更
4. ESP32にプログラムを書き込む
5. ESP32が起動し、WiFiに接続してNTPサーバーから時刻を取得
6. LCDパネルにスマートウォッチ風のアナログ時計が表示される

## 主な機能
- **スマートウォッチ風デザイン**: 黒背景に白いマーカーと針を使用したミニマルなデザイン
- **針のデザイン**: 時針は幅広、分針は細め、秒針は赤色の細い針で表現
- **マーカー**: 12時間分のドットマーカーと12時位置の数字のみを表示
- **NTP同期**: インターネット経由で正確な時刻を取得し、表示します
- **エラー処理**: NTP同期に失敗した場合でも、内部時計を使用して時刻を表示します

## カスタマイズ方法
- `ntp_clock.cpp`の色設定を変更することで、時計の外観をカスタマイズできます
- 針の長さや太さも調整可能です
- NTPサーバーの設定も変更できます

## トラブルシューティング
- WiFi接続に問題がある場合は、SSIDとパスワードを確認してください
- LCDの表示に問題がある場合は、配線を確認してください
- NTP同期に問題がある場合は、インターネット接続を確認してください

## ライセンス
MITライセンスの下で公開されています。詳細はリポジトリのLICENSEファイルを参照してください。
